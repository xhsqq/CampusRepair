{% extends 'base.html' %}
{% block title %}提交报修 - 校园报修系统{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-sm border-0">
            <div class="card-header bg-white py-3">
                <h5 class="mb-0">填写报修申请</h5>
            </div>
            <div class="card-body p-4">
                <form method="POST" enctype="multipart/form-data">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">报修地点</label>
                            <input type="text" name="location" class="form-control" required placeholder="如：宿舍楼 A 栋 302">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">故障类别</label>
                            <select name="category" class="form-select" required>
                                <option value="水电维修">水电维修</option>
                                <option value="门窗木工">门窗木工</option>
                                <option value="网络通信">网络通信</option>
                                <option value="其他">其他</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">紧急程度</label>
                        <div class="d-flex gap-4">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="urgency_level" value="1" id="u1" checked>
                                <label class="form-check-label" for="u1">低 (一般报修)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="urgency_level" value="2" id="u2">
                                <label class="form-check-label" for="u2">中 (影响使用)</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="urgency_level" value="3" id="u3">
                                <label class="form-check-label" for="u3 text-danger">高 (紧急故障)</label>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">故障描述</label>
                        <textarea name="content" class="form-control" rows="4" required placeholder="请详细描述故障现象..."></textarea>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">现场照片 (可选)</label>
                            <input type="file" name="image" class="form-control" accept="image/*">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">联系电话</label>
                            <input type="text" name="contact_phone" class="form-control" value="{{ session.phone or '' }}" required>
                        </div>
                    </div>

                    <hr class="my-4">
                    <div class="d-flex justify-content-end">
                        <a href="{{ url_for('dashboard') }}" class="btn btn-light me-2">取消</a>
                        <button type="submit" class="btn btn-primary px-5">提交报修单</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
